<!DOCTYPE html>
<html lang="ko">

<head>
  <%- include('include/head') %>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/searchPage.css">
  <title>메인페이지</title>
</head>

<body>
  <%- include('include/header') %>
  <!-- 바디 -->
  <main>
    <!-- 본문 -->
    <section class="article_list">
      <h1 class="search_title">'<%= metaData.query %>' 관련 상품입니다</h1>
      <h1 class="search_index">총 <%= metaData.totalProductCount %>개의 결과가 검색되었습니다.</h1>
      <div class="card_container">
        <% products.map((product)=> { %>
        <div class="card_wrap">
          <article class="card">
            <a class="card_link">
              <div class="card_photo">
                <img src="<%= product.image_url %>" alt="<%= product.title %> 이미지">
              </div>
              <div class="card_desc">
                <a class="card_title" href="/auction/item/<%= product.product_id %>">
                  <%= product.title %>
                </a>
                <div class="card_row2">
                  <span class="card_current_price">
                    <%= product.current_price %>원
                  </span>
                </div>
                <div class="card_row3">
                  <span class="card_count">
                    관심 <%= product.like_count %>
                  </span>
                  <span class="card_bar">
                    |
                  </span>
                  <span class="card_created_at">
                    <%= product.created_at %>
                  </span>
                </div>
                <div class="card_row3">
                  <span class="card_termination_date">
                    마감 <%= product.termination_date %>
                  </span>
                </div>
            </a>
          </article>
        </div>
        <% }) %>
      </div>
    </section>
    <div class="pagination_container">
      <a href="<%= metaData.url %><%=metaData.group.prevGroupPage %>" <% if (metaData.group.prevGroupPage===null) { %> class="prev_page disabled" onclick="return false;" <% } else { %> class="prev_page" <% } %>>
        이전
      </a>
      <% for (let page=metaData.page.startPage; page <=metaData.page.endPage; page++) { %>
      <a href="<%= metaData.url %><%= page %>" <% if (metaData.page.currentPage===page) { %> class="current_page" <%
              } %>>
        <%= page %>
      </a>
      <% } %>
      <a href="<%= metaData.url %><%=metaData.group.nextGroupPage %>" <% if (metaData.group.nextGroupPage===null)
              { %> class="next_page disabled" onclick="return false;" <% } else { %> class="prev_page" <% } %>>
        다음
      </a>
    </div>
  </main>
  <script src="/js/index.js"></script>
</body>

</html>